/* eslint-disable no-undef */
const pokemonRepository=function(){const t=[],e='https://pokeapi.co/api/v2/pokemon/?limit=150',o=document.querySelector('#search-option');function n(e){'object'==typeof e&&'name'in e&&'urlDetail'in e?t.push(e):console.log('pokemon is not correct')}function i(t){const e=t.urlDetail;return fetch(e).then(t=>t.json()).then(e=>{t.imageUrl=e.sprites.front_default,t.height=e.height,t.types=[],e.types.forEach(e=>{t.types.push(e.type.name)}),t.abilities=[],e.abilities.forEach(e=>{t.abilities.push(e.ability.name)})}).catch(t=>{console.error(t)})}function s(t){i(t).then(()=>{const e=$('.modal-body'),o=$('.modal-title');o.empty(),e.empty();const n=$(`<h1>${t.name}</h1>`),i=$('<img class="modal-img" style="width: 50%">');i.attr('src',t.imageUrl);const s=$(`<p>Height: ${t.height}</p>`),a=$(`<p>ability: ${t.abilities}</p>`),l=$(`<p>type: ${t.types}</p>`);o.append(n),e.append(i),e.append(s),e.append(a),e.append(l)})}return o.addEventListener('input',()=>{const t=document.querySelectorAll('.list-group-item'),e=o.value.toUpperCase();console.log(t),t.forEach(t=>{console.log(t.innerText),t.innerText.toUpperCase().indexOf(e)>-1?t.style.display='':t.style.display='none'})}),{getAll:function(){return t},add:n,addListItem:function(t){const e=document.querySelector('.list-group'),o=document.createElement('li');o.classList.add('list-group-item');const n=document.createElement('button');n.innerText=t.name,n.classList.add('btn'),n.classList.add('btn-light'),n.classList.add('btn-block'),n.classList.add('btn-lg'),n.classList.add('bg-link'),n.setAttribute('data-toggle','modal'),n.setAttribute('data-target','#pokedexModal'),e.appendChild(o),o.appendChild(n),n.addEventListener('click',()=>{s(t)})},loadList:function(){return fetch(e).then(t=>t.json()).then(t=>{t.results.forEach(t=>{const e={name:t.name,urlDetail:t.url};n(e),console.log(e)})}).catch(t=>{console.error(t)})},loadDetails:i,showDetails:s}}();pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(t=>{pokemonRepository.addListItem(t)})});